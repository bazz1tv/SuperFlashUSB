<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>LUFA Library: Exporting the Library for IDE Use</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="Style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="LUFA_thumb.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">LUFA Library
   &#160;<span id="projectnumber">130901</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_page__exporting_library.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Exporting the Library for IDE Use </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>While LUFA was designed to allow for easy compilation in a makefile driven environment, it is possible to export the library into a form suitable for drop-in use inside of an IDE.</p>
<dl class="section note"><dt>Note</dt><dd><b>LUFA is also available as a native Atmel Studio 6.1 extension</b>, which integrates LUFA into Atmel Studio including all demos and projects. If you are running Atmel Studio 6.1 or later, the below instructions are not required; download and install the native LUFA extension from the <a href="http://gallery.atmel.com">Atmel Gallery</a> instead.</dd></dl>
<h1><a class="anchor" id="Sec_LibraryExport"></a>
Exporting the Library</h1>
<p>An export of the library is at its most basic, a direct copy of the main "LUFA" source folder from the root download folder; this contains the library core which can be re-used within external projects. However, as many IDEs attempt to automatically compile all included source files, it is necessary to exclude some directories and files from the library core export to allow for easier integration into an IDE project.</p>
<h2><a class="anchor" id="SSec_ManualExport"></a>
Manual Export</h2>
<p>To manually export the library core, copy over the main LUFA library folder from the LUFA root directory, renaming as desired. Within the library core folder, the following directories should be removed or excluded from your IDE import:</p>
<ul>
<li>Documentation/</li>
<li>DoxygenPages/</li>
<li>CodeTemplates/</li>
<li>StudioIntegration/</li>
</ul>
<p>If required, files from the CodeTemplates/ subdirectory may be copied to your IDE project as needed.</p>
<p>The resulting copy of the library may then be imported into your chosen IDE according to the instructions shown in <a class="el" href="_page__exporting_library.html#Sec_LibraryImport">Importing the Library</a>.</p>
<h2><a class="anchor" id="SSec_AutomaticExport"></a>
Automatic Export</h2>
<p>If desired, the steps indicated in <a class="el" href="_page__exporting_library.html#SSec_ManualExport">Manual Export</a> may be automatically performed, by running the command <b><code>make export_tar</code></b> from the command line. This will generate two .tar files in the current directory, named <code>LUFA_YYMMDD.tar</code> and <code>LUFA_YYMMDD_Code_Templates.tar</code> (where "YYMMDD" is the version of the library being exported). The first archive contains the exported LUFA core with the non-required files removed, while the second contains an archived copy of the code template files for the current LUFA version.</p>
<p>The resulting archived copy of the library may then be extracted to your chosen IDE project source directory and imported according to the instructions shown in <a class="el" href="_page__exporting_library.html#Sec_LibraryImport">Importing the Library</a>.</p>
<h1><a class="anchor" id="Sec_LibraryImport"></a>
Importing the Library</h1>
<p>An exported copy of the library may be imported wholesale into an IDE project, if the instructions detailed in <a class="el" href="_page__exporting_library.html#Sec_LibraryExport">Exporting the Library</a> are followed.</p>
<p>Specific instructions for importing an exported version of LUFA into various IDEs are listed below.</p>
<h2><a class="anchor" id="SSec_AS56_Import"></a>
Importing into AVRStudio 5.x/Atmel Studio 6.0</h2>
<p>To import LUFA into a new or existing project, the following steps must be followed.</p>
<h3><a class="anchor" id="SSSec_AS56_Import_Step1"></a>
Copy over the exported library</h3>
<p>Copy over the exported library archive created via the steps listed in <a class="el" href="_page__exporting_library.html#Sec_LibraryExport">Exporting the Library</a> to your AS5/AS6 project directory.</p>
<div class="image">
<img src="AS5_AS6_Import_Step1.png" alt="AS5_AS6_Import_Step1.png"/>
</div>
<h3><a class="anchor" id="SSSec_AS56_Import_Step2"></a>
Extract exported library</h3>
<p>Extract out the contents of the archive to a new folder. This may be any name you wish, however keep in mind that this name will need to be referenced within your user application under most circumstances. It is suggested that this folder be named "LUFA", or "LUFA" followed by the version string for easy reference.</p>
<div class="image">
<img src="AS5_AS6_Import_Step2.png" alt="AS5_AS6_Import_Step2.png"/>
</div>
<h3><a class="anchor" id="SSSec_AS56_Import_Step3"></a>
Add the library files</h3>
<p>Open your AVRStudio 5/Atmel Studio 6 project. From the "Solution Explorer" pane, click the "Show All Files" button on the toolbar to display ghosted icons of files and folders located in the project source directory that are not currently added to the project.</p>
<div class="image">
<img src="AS5_AS6_Import_Step3.png" alt="AS5_AS6_Import_Step3.png"/>
</div>
<p>Right-click the ghosted version of the extracted LUFA export folder in the Solution Explorer pane, and choose the "Add to Project" option from the context menu. This will add the entire LUFA source tree to the current project.</p>
<h3><a class="anchor" id="SSSec_AS56_Import_Step4"></a>
Open Project Toolchain Properties</h3>
<p>In the Solution Explorer pane, click the project node, and press the "Properties" button in the toolbar to open the Project Properties window. This window allows you to configure the various project global compiler, assembler and linker options.</p>
<div class="image">
<img src="AS5_AS6_Import_Step4.png" alt="AS5_AS6_Import_Step4.png"/>
</div>
<p>Click the "Toolchain" tab on the left side of the Project Properties window.</p>
<h3><a class="anchor" id="SSSec_AS56_Import_Step5"></a>
Configure Project Toolchain Properties</h3>
<p>In the GNU C Compiler section, open the "Symbols" page. Click the "Add Item" button to the top-right of the "Defined Symbols" section to add new symbols.</p>
<p>At a minimum, you will need to define the following symbols (for more information on these symbols, see <a class="el" href="_page__configuring_apps.html">Configuring the Demos, Bootloaders and Projects</a>):</p>
<ul>
<li>ARCH</li>
<li>F_CPU</li>
<li>F_USB</li>
<li>BOARD <div class="image">
<img src="AS5_AS6_Import_Step5_1.png" alt="AS5_AS6_Import_Step5_1.png"/>
</div>
</li>
</ul>
<p>Next, open the GNU C Compiler section's "Optimization" page. Ensure that the option to prepare functions for garbage collection is enabled. </p>
<div class="image">
<img src="AS5_AS6_Import_Step5_2.png" alt="AS5_AS6_Import_Step5_2.png"/>
</div>
<p>Finally, in the GNU C Linker section, open the "Optimization" page. Ensure that the option to garbage collect unused sections is selected. </p>
<div class="image">
<img src="AS5_AS6_Import_Step5_3.png" alt="AS5_AS6_Import_Step5_3.png"/>
</div>
 </div></div><!-- contents -->
</div><!-- doc-content -->

	<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
		<ul>
			<li class="footer" style="float:left !important;">
				Generated by
				<a href="http://www.doxygen.org/index.html">
					<img class="footer" src="doxygen.png" alt="doxygen"/>
				</a>
				1.8.3.1
			</li>
			<li class="footer">
				<a href="http://www.lufa-lib.org" title="LUFA Project Page">LUFA Project Page</a> | <a href="http://www.lufa-lib.org/support" title="LUFA Support List">Support Mailing List</a> | <a href="http://www.lufa-lib.org/donate" title="Donate to Support LUFA">Donate</a> | <a href="http://www.fourwalledcubicle.com" title="Four Walled Cubicle Website">Four Walled Cubicle</a> - LUFA, the Lightweight USB Framework for AVRs
			</li>
		</ul>
	</div>
	</body>
</html>
